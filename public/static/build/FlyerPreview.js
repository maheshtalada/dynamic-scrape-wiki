(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{"1byH":function(e,t,a){"use strict";var n=a("gcR/"),o=a.n(n),r=a("lwsE"),i=a.n(r),s=a("W8MJ"),c=a.n(s),l=a("a1gu"),p=a.n(l),d=a("Nsbk"),u=a.n(d),h=a("7W2i"),v=a.n(h),m=(a("q1tI"),a("17x9")),f=a.n(m),g=a("L2nl").a,y=function(e){function RootList(e){return i()(this,RootList),p()(this,u()(RootList).call(this,e))}return v()(RootList,e),c()(RootList,[{key:"renderLabel",value:function renderLabel(){return null}},{key:"renderValue",value:function renderValue(){var e=this.getValueClassNames();return o()("div",{className:e},void 0,this.props.children)}}]),RootList}(g);y.propTypes={classNames:f.a.array},y.defaultProps={classNames:["pdf-schema__root-list"]};var _=function(e){function ImageComponent(e){return i()(this,ImageComponent),p()(this,u()(ImageComponent).call(this,e))}return v()(ImageComponent,e),c()(ImageComponent,[{key:"renderLabel",value:function renderLabel(){return null}},{key:"render",value:function render(){var e=this.getClassNames(),t=this.props.data.value,a={border:this.props.isBorderRequired?"1px sloid":"none"};return o()("div",{className:e},void 0,o()("img",{className:"pdf-schema__image__auto-resize",src:"".concat(this.props.awsImagePath,"/").concat(t),style:a}))}}]),ImageComponent}(g);_.defaultProps={isBorderRequired:!1,classNames:["pdf-schema__image"]},_.propTypes={isBorderRequired:f.a.boolean,classNames:f.a.array};var b=function(e){function ImageGalleryComponent(e){return i()(this,ImageGalleryComponent),p()(this,u()(ImageGalleryComponent).call(this,e))}return v()(ImageGalleryComponent,e),c()(ImageGalleryComponent,[{key:"render",value:function render(){var e=this,t=this.getClassNames(),a=this.props.data.medias;return o()("div",{className:t},void 0,a.map((function(t){return o()("div",{className:"pdf-schema__image-gallery__image-wrapper"},void 0," ",o()(_,{data:{value:t.uri},awsImagePath:e.props.awsImagePath}))})))}}]),ImageGalleryComponent}(g);b.defaultProps={isBorderRequired:!1,classNames:["pdf-schema__image-gallery"]},b.propTypes={imagePath:f.a.string,isBorderRequired:f.a.boolean,classNames:f.a.array};var k=function(e){function CustomOpenHouse(e){return i()(this,CustomOpenHouse),p()(this,u()(CustomOpenHouse).call(this,e))}return v()(CustomOpenHouse,e),c()(CustomOpenHouse,[{key:"renderLabel",value:function renderLabel(){return null}},{key:"renderValue",value:function renderValue(){var e=this.props.assetsPath,t=this.getValueClassNames();return o()("div",{className:t},void 0,o()("img",{src:"".concat(e,"/images/properties/open-house-sign.png"),className:"pdf-schema__open-house__icon"}),o()("div",{className:"pdf-schema__open-house__time"},void 0,this.props.children))}}]),CustomOpenHouse}(g);k.propTypes={classNames:f.a.array},k.defaultProps={classNames:["pdf-schema__open-house"]};var N={root:y,image:_,"image-gallery":b,"open-house":k};t.a=N},"5IO/":function(e,t,a){"use strict";a.d(t,"a",(function(){return connectDataFetchers}));var n=a("lSNA"),o=a.n(n),r=a("pVnL"),i=a.n(r),s=a("lwsE"),c=a.n(s),l=a("W8MJ"),p=a.n(l),d=a("a1gu"),u=a.n(d),h=a("Nsbk"),v=a.n(h),m=a("7W2i"),f=a.n(m),g=a("q1tI"),y=a.n(g),_=a("17x9"),b=a.n(_);function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var k=!0;function connectDataFetchers(e){var t,a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return a=t=function(t){function DataFetchersWrapper(){return c()(this,DataFetchersWrapper),u()(this,v()(DataFetchersWrapper).apply(this,arguments))}return f()(DataFetchersWrapper,t),p()(DataFetchersWrapper,[{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props.location,a=e.location;(t.pathname!==a.pathname||t.search!==a.search)&&this._fetchDataOnClient()}},{key:"componentDidMount",value:function componentDidMount(){!r&&k||this._fetchDataOnClient(),k=!1}},{key:"_fetchDataOnClient",value:function _fetchDataOnClient(){var e=this.context.i18n?this.context.i18n.getLocale():"en";DataFetchersWrapper.fetchData({locale:e,dispatch:this.props.dispatch,params:this.props.params,query:this.props.location.query})}},{key:"render",value:function render(){return y.a.createElement(e,i()({},this.props,s))}}],[{key:"fetchData",value:function fetchData(e){var t=e.dispatch,a=e.params,r=void 0===a?{}:a,i=e.query,c=void 0===i?{}:i,l=e.locale;return Promise.all(n.map((function(e){return t(e(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach((function(t){o()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({params:r,query:c,locale:l},s)))})))}}]),DataFetchersWrapper}(e),t.contextTypes={i18n:b.a.object,router:b.a.object},a}},"9V8J":function(e,t,a){"use strict";a.d(t,"a",(function(){return L}));var n=a("pVnL"),o=a.n(n),r=a("gcR/"),i=a.n(r),s=a("lwsE"),c=a.n(s),l=a("W8MJ"),p=a.n(l),d=a("a1gu"),u=a.n(d),h=a("Nsbk"),v=a.n(h),m=a("7W2i"),f=a.n(m),g=a("q1tI"),y=a.n(g),_=a("17x9"),b=a.n(_),k=a("J+aZ"),N=a("aNkp"),C=a("TSYQ"),x=a.n(C),w=i()(N.a,{}),P=i()("i",{className:"pe-7s-angle-left"}),D=i()(N.a,{}),O=i()(N.a,{singleColor:"#fff"}),S=i()("i",{className:"pe-7s-angle-right"}),L=function(e){function LinearNavigation(e){var t;return c()(this,LinearNavigation),(t=u()(this,v()(LinearNavigation).call(this,e))).state={},t}return f()(LinearNavigation,e),p()(LinearNavigation,[{key:"onClickBack",value:function onClickBack(){this.props.onBack()}},{key:"onClickNext",value:function onClickNext(){this.props.onNext()}},{key:"onClickConfirm",value:function onClickConfirm(){this.props.onConfirm()}},{key:"onClickNavigateSaveExit",value:function onClickNavigateSaveExit(){this.props.onNavigateSaveExit()}},{key:"render",value:function render(){var e=this,t=this.context.i18n.l,a=this.props,n=a.nextText,r=a.backText,s=a.className,c=a.saveExitText,l=a.isNextDisabled,p=a.isBackRequired,d=a.nextCaret,u=a.backCaret,h=a.currentActiveLoader,v=a.isNavigatingSaveExitRequired,m=a.navigatingSaveExitText,f=a.nextBtnGATags,g="linear-navigation__button-wrapper__back "+(p?"":" hide ");return i()("div",{className:"linear-navigation ".concat(s)},void 0,i()("div",{className:"linear-navigation__button-wrapper"},void 0,i()(k.a,{className:x()("toolbar-group",g),onClick:function onClick(){return e.onClickBack()}},void 0,"back"===h?w:"",u&&P,t(r)),this.props.isSaveExitRequired&&i()(k.a,{className:"linear-navigation__button-wrapper__save-and-exit",btnClassName:"btn-default",onClick:function onClick(){return e.onClickConfirm()}},void 0,"saveexit"===h?D:"",t(c)),v&&i()(k.a,{className:"linear-navigation__button-wrapper__save-and-exit",btnClassName:"btn-default",onClick:function onClick(){return e.onClickNavigateSaveExit()}},void 0,t(m)),this.props.isNextRequired&&y.a.createElement(k.a,o()({},f,{className:"toolbar-group linear-navigation__button-wrapper__next",onClick:function onClick(){return e.onClickNext()},disabled:l}),"next"===h?O:"",t(n),d&&S)))}}]),LinearNavigation}(y.a.Component);L.defaultProps={nextCaret:!0,backCaret:!0,nextText:"Next",backText:"Back",saveExitText:"Save for later",isBackRequired:!0,isSaveExitRequired:!1,useChevrons:!0,nextButtonType:"button",backButtonType:"button",currentActiveLoader:"",onNext:function onNext(){},onBack:function onBack(){},onConfirm:function onConfirm(){},onShowPopup:function onShowPopup(){},className:"",isNextDisabled:!1,isBackDisabled:!1,navigatingSaveExit:!1,navigatingSaveExitText:"Save and Exit",isNavigatingSaveExitRequired:!1,isNextRequired:!0,nextBtnGATags:{}},L.contextTypes={router:b.a.object,i18n:b.a.object}},BFwJ:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),o=a.n(n),r=a("yXPU"),i=a.n(r),s=a("gcR/"),c=a.n(s),l=a("lwsE"),p=a.n(l),d=a("W8MJ"),u=a.n(d),h=a("a1gu"),v=a.n(h),m=a("Nsbk"),f=a.n(m),g=a("7W2i"),y=a.n(g),_=a("q1tI"),b=a.n(_),k=a("17x9"),N=a.n(k),C=a("9V8J"),x=a("r39Y"),w=a("Vg22"),P=a("J+aZ"),D=a("WZLu"),O=a("1byH"),S=a("E+oP"),L=a.n(S),R=a("P/G1"),E=a.n(R),B=(a("BkRI"),a("xweI")),F=a.n(B),T=(a("zdiy"),a("J2m7"),a("bA66")),I=a("5IO/"),q=a("vDqi"),j=a.n(q),W=a("MKeS"),V=a("EYOh"),A=a("Aud9"),U=Object(W.a)((function(){return Promise.resolve().then(a.bind(null,"VDYv"))})),G=x.default.assetsPath,H=(x.default.imageRootPath,function(e){function FlyerPreview(e,t){var a;return p()(this,FlyerPreview),(a=v()(this,f()(FlyerPreview).call(this,e,t))).onSchemaChange=function(e,t){a.setState({changeObject:e,hasErrors:t});var n=E()(a.props.property_pdf_data.pages).length;if(!L()(a.refs))for(var o=0;o<n;++o)a.refs["schema_".concat(o)]&&a.refs["schema_".concat(o)].rebuild()},a.state={modifiedValues:{},initialValues:{}},a.el=b.a.createRef(),a}return y()(FlyerPreview,e),u()(FlyerPreview,[{key:"componentDidUpdate",value:function componentDidUpdate(){var e=this,t=this.context.screenSize;if(this.el.current&&t<=2&&!this.stylesUpdated){var a=this.el.current.getBoundingClientRect(),n=Math.min(window.innerWidth/a.width,window.innerHeight/1227);this.el.current.style.transform="scale("+n+")",setTimeout((function(){var t=e.el.current.getBoundingClientRect(),a=document.getElementsByClassName("wizard__step-container")[0].offsetHeight,n=document.getElementsByClassName("linear-navigation"),o=a-(t.bottom+70);n[0].style.marginTop="-".concat(o,"px"),e.stylesUpdated=!0}),500)}}},{key:"render",value:function render(){var e=this.context.i18n.l,t=this.state,a=(t.templateOption,t.isFileDownloading),n=this.props,o=(n.stepConfig,n.property_pdf_data),r=void 0===o?"":o;n.user.user,n.dispatch;return c()("div",{className:"choose-template-step wizard__step-container"},void 0,c()("div",{className:"flex flex-justify-center"},void 0,c()("h3",{className:"wizard__question"},void 0,e("PREVIEWPDF"))),r.type&&b.a.createElement("div",{ref:this.el,className:"wizard__answer-options-container pdf-generator pdf-".concat(r.type.toLowerCase(),"-").concat(r.template)},this.renderSchema()),c()(C.a,{nextBtnGATags:{"data-tag-category":"Generate Flyer Actions","data-tag-action":"Click","data-tag-label":"Generate Flyer"},nextText:"Download PDF (A4)",currentActiveLoader:a?"next":"",backText:e("PREVIOUS"),className:"linear-navigation--light-theme",onNext:this.onNextClick.bind(this),onBack:this.onBackClick.bind(this)}))}},{key:"renderSchema",value:function renderSchema(){var e=this,t=this.props.property_pdf_data,a=this.context.i18n.l,n=t.pages,o=t.referenceData||{};return F()(E()(n),(function(e){return e.order})).map((function(n,r){return c()("div",{className:"pdf-preview-page"},void 0,e.renderPDFHeader(t.header),b.a.createElement(D.a,{l:a,assetsPath:G,ref:"schema_".concat(r),data:n,customComponentIndex:O.a,writeMode:!0,onChange:e.onSchemaChange.bind(e),modifiedValues:e.state.modifiedValues,initialValues:e.state.initialValues,referenceData:o}),e.renderPDFFooter(t.footer))}))}},{key:"renderPDFHeader",value:function renderPDFHeader(e){return c()("div",{className:"pdf-header"},void 0,c()("div",{className:"pdf-header__left"},void 0,c()("div",{className:"pdf-header__logo"},void 0,c()("a",{target:"_blank",href:"/"},void 0,c()("img",{src:"".concat(G,"/images/logo/logo_us_green.png"),alt:"propshub"})))),c()("div",{className:"pdf-header__right"},void 0,c()("h4",{className:"pdf-header__title"},void 0,e.title)))}},{key:"renderPDFFooter",value:function renderPDFFooter(e){var t=this,a=e.realtor,n=void 0===a?"":a,o=e.brokerageFirm,r=void 0===o?"":o,i=n.photo?"Change ".concat("Profile Photo"):"Add ".concat("Profile Photo"),s=r.logo?"Change ".concat("Logo"):"Add ".concat("Logo");return c()("div",{className:"pdf-footer"},void 0,n&&c()("div",{className:"pdf-footer__left"},void 0,c()("div",{className:"pdf-footer__left__pic"},void 0,c()(U,{userInfo:{photo:{uri:n.photo}},dispatch:this.props.dispatch,isStopWindowReload:!0,isShowUpload:!1,photoUrl:n.photo},"realtor-".concat(this.props.params.id))),c()("div",{className:"pdf-footer__left__info"},void 0,c()("div",{className:"realtor-name"},void 0,c()("a",{href:"".concat(n.siteurl),target:"_blank"},void 0,n.name)),n.phone&&c()("div",{className:"realtor-phone"},void 0,n.phone.replace(/./g,(function(e,t){return 2===t||5===t?e+"-":e}))),n.email&&c()("div",{className:"realtor-email"},void 0,n.email)),c()(P.a,{btnClassName:"btn-default",onClick:function onClick(){return t.updateActions("realtor",{photo:{uri:n.photo}})}},void 0,i)),r&&c()("div",{className:"pdf-footer__right"},void 0,c()("div",{className:"pdf-footer__right__info"},void 0,c()("div",{className:"realtor-name"},void 0,r.name),r.phone&&c()("div",{className:"realtor-phone"},void 0,r.phone.replace(/./g,(function(e,t){return 2===t||5===t?e+"-":e}))),r.email&&c()("div",{className:"realtor-email"},void 0,r.email)),c()("div",{className:"pdf-footer__right__pic"},void 0,c()(U,{userInfo:{photo:{uri:r.logo}},dispatch:this.props.dispatch,isStopWindowReload:!0,isShowUpload:!1,photoUrl:r.logo},"brokerage-".concat(this.props.params.id))),c()(P.a,{btnClassName:"btn-default",onClick:function onClick(){return t.updateActions("brokerage",{photo:{uri:r.logo}})}},void 0,s)))}},{key:"updateActions",value:function updateActions(e,t){this.imageUploadActions="realtor"===e?{add:A.l}:{add:A.k},this.onClickProfilePic(this.props.params.id,t)}},{key:"onBackClick",value:function onBackClick(){this.context.router.push({pathname:"/profile/flyer/contactinfo/".concat(this.props.params.id),query:this.props.location.query})}},{key:"onNextClick",value:function(){var e=i()(o.a.mark((function _callee(){var e,t,a,n,r,i,s,c,l,p;return o.a.wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:return e={method:"GET",url:"/api/v1/puppeteer?id=".concat(this.props.params.id),responseType:"arraybuffer",headers:{Accept:"application/pdf",clientip:frameworkGlobals.visitorIP}},this.setState({isFileDownloading:!0}),o.prev=2,t=this.props.property_pdf_data,a=t.title,n=t.type,r=t.template,o.next=6,j()(e);case 6:i=o.sent,s=new Blob([i.data],{type:"application/pdf"}),c=document.createElement("a"),l=window.URL.createObjectURL(s),p="".concat(n.toLowerCase(),"-").concat(r,"-").concat(a,".pdf"),navigator&&navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,p):(c.href=l,c.download=p,c.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0}))),setTimeout((function(){window.URL.revokeObjectURL(l)}),100),this.setState({isFileDownloading:!1}),o.next=19;break;case 16:o.prev=16,o.t0=o.catch(2),console.log(o.t0);case 19:case"end":return o.stop()}}),_callee,this,[[2,16]])})));return function onNextClick(){return e.apply(this,arguments)}}()}]),FlyerPreview}(V.a));H.contextTypes={router:N.a.object,i18n:N.a.object,country:N.a.string,screenSize:N.a.number,awsImagePath:N.a.string};t.default=Object(w.connect)((function mapStateToProps(e){var t=e.properties.property_pdf_data;return{property_pdf_data:void 0===t?"":t}}))(Object(I.a)(H,[T.f],!0))},WZLu:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("gcR/"),o=a.n(n),r=a("MKeS"),i=Object(r.a)((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(83)]).then(a.bind(null,"pzZ4"))}),{LoadingComponent:o()("div",{},void 0,"Loading...")})},qbnB:function(e,t,a){var n=a("juv8"),o=a("LsHQ"),r=a("mTTR"),i=o((function(e,t){n(t,r(t),e)}));e.exports=i},zdiy:function(e,t,a){e.exports=a("qbnB")}}]);