(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{"0pjm":function(e,t,n){"use strict";n.r(t);var a=n("gcR/"),r=n.n(a),i=n("lwsE"),s=n.n(i),o=n("W8MJ"),c=n.n(o),l=n("a1gu"),f=n.n(l),u=n("Nsbk"),p=n.n(u),h=n("PJYZ"),d=n.n(h),m=n("7W2i"),g=n.n(m),v=n("q1tI"),_=n.n(v),S=n("17x9"),y=n.n(S),b=n("5IO/"),w=n("Vg22"),O=n("GMTw"),E=n("WZLu"),D=n("E+oP"),P=n.n(D),W=n("P/G1"),C=n.n(W),T=(n("BkRI"),n("xweI"),n("zdiy")),j=n.n(T),k=n("GEYT"),x=n.n(k),I=n("J+aZ"),F=n("jKqO"),N=r()(O.a,{}),M=function(e){function PreferencesComponent(e){var t;return s()(this,PreferencesComponent),(t=f()(this,p()(PreferencesComponent).call(this,e))).state={isFetching:!1,modifiedValues:{},initialValues:{},hasErrors:!1},t.onSubmit=t.onSubmit.bind(d()(t)),t.onSchemaChange=t.onSchemaChange.bind(d()(t)),t}return g()(PreferencesComponent,e),c()(PreferencesComponent,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){var t=e.getPreferences,n=e.savePreferences;e&&(this.setState({isFetching:t&&t.isFetching,referenceData:t&&t.referenceData,schemaInfos:t&&t.schemaInfos,schemas:t&&t.schemas,isSaving:n&&n.isSaving,preferencesSaveSuccess:n&&"success"===n.status}),n&&"success"===n.status&&window.scrollTo(0,0))}},{key:"onSchemaChange",value:function onSchemaChange(e,t){var n=this.props.getPreferences;this.setState({changeObject:e,hasErrors:t});var a=C()(n.schemas).length;if(!P()(this.refs))for(var r=0;r<a;++r)this.refs["schema_".concat(r)]&&this.refs["schema_".concat(r)].rebuild()}},{key:"onSubmit",value:function onSubmit(){for(var e=!0,t=[],n=this.state.schemas,a=C()(n).length,r=0;r<a;++r)this.refs["schema_".concat(r)].checkSubmissionValid()||(t.push("schema_".concat(r)),e=!1);e?this.props.dispatch(Object(F.s)({dataPayload:j()({},this.state.initialValues,this.state.modifiedValues)})):x()(document.getElementById(t[0]))}},{key:"renderSchema",value:function renderSchema(){var e=this,t=this.state,n=t.schemas,a=(t.schemaInfos,t.referenceData),i=t.schemaKey,s=this.context,o=s.i18n,c=s.country;return r()("div",{className:"profile-page__layout__profile-section__preferences-wrapper__schema-wrapper"},void 0,n.map((function(t,n){return r()("div",{className:"schema-container-wrapper schema-border",id:"schema_".concat(n)},void 0,_.a.createElement(E.a,{l:o.l,country:c,key:i,ref:"schema_".concat(n),data:t,writeMode:!0,onChange:e.onSchemaChange,modifiedValues:e.state.modifiedValues,initialValues:e.state.initialValues,referenceData:a}))})))}},{key:"render",value:function render(){var e=this.context.i18n.l,t=this.state,n=t.isFetching,a=t.schemas,i=t.isSaving,s=t.preferencesSaveSuccess;return r()("div",{className:"profile-page__layout__profile-section"},void 0,r()("div",{className:"profile-page__layout__profile-section__preferences-wrapper"},void 0,r()("div",{className:"profile-page__layout__profile-section__preferences-wrapper__header"},void 0,r()("h1",{className:"profile-page__layout__profile-section__preferences-wrapper__title"},void 0,e("MYPREFERENCES"))),s&&r()("div",{className:"alert alert-success"},void 0,e("PREFERENCESSAVESUCCESS")),(n||i)&&N,a&&a.length>0&&r()("div",{},void 0,this.renderSchema()),a&&a.length>0&&r()("div",{className:"save-preferences-btn"},void 0,r()(I.a,{btnClassName:"btn-primary",onClick:this.onSubmit},void 0,e("SAVE")))))}}]),PreferencesComponent}(v.Component);M.contextTypes={i18n:y.a.object};t.default=Object(w.connect)((function mapStateToProps(e){var t=e.schema;return{getPreferences:t.get_notification_preferences_schema,savePreferences:t.save_notification_preferences_schema}}))(Object(b.a)(M,[F.p],!0))},"5IO/":function(e,t,n){"use strict";n.d(t,"a",(function(){return connectDataFetchers}));var a=n("lSNA"),r=n.n(a),i=n("pVnL"),s=n.n(i),o=n("lwsE"),c=n.n(o),l=n("W8MJ"),f=n.n(l),u=n("a1gu"),p=n.n(u),h=n("Nsbk"),d=n.n(h),m=n("7W2i"),g=n.n(m),v=n("q1tI"),_=n.n(v),S=n("17x9"),y=n.n(S);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var b=!0;function connectDataFetchers(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n=t=function(t){function DataFetchersWrapper(){return c()(this,DataFetchersWrapper),p()(this,d()(DataFetchersWrapper).apply(this,arguments))}return g()(DataFetchersWrapper,t),f()(DataFetchersWrapper,[{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props.location,n=e.location;(t.pathname!==n.pathname||t.search!==n.search)&&this._fetchDataOnClient()}},{key:"componentDidMount",value:function componentDidMount(){!i&&b||this._fetchDataOnClient(),b=!1}},{key:"_fetchDataOnClient",value:function _fetchDataOnClient(){var e=this.context.i18n?this.context.i18n.getLocale():"en";DataFetchersWrapper.fetchData({locale:e,dispatch:this.props.dispatch,params:this.props.params,query:this.props.location.query})}},{key:"render",value:function render(){return _.a.createElement(e,s()({},this.props,o))}}],[{key:"fetchData",value:function fetchData(e){var t=e.dispatch,n=e.params,i=void 0===n?{}:n,s=e.query,c=void 0===s?{}:s,l=e.locale;return Promise.all(a.map((function(e){return t(e(function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({params:i,query:c,locale:l},o)))})))}}]),DataFetchersWrapper}(e),t.contextTypes={i18n:y.a.object,router:y.a.object},n}},GEYT:function(e,t){var n="complete",a="canceled";function setElementScroll(e,t,n){e.self===e?e.scrollTo(t,n):(e.scrollLeft=t,e.scrollTop=n)}function animate(e){var t=e._scrollSettings;if(t){var a=t.maxSynchronousAlignments,r=function getTargetScrollLocation(e,t){var n,a,r,i,s,o,c,l=e.align,f=e.target.getBoundingClientRect(),u=l&&null!=l.left?l.left:.5,p=l&&null!=l.top?l.top:.5,h=l&&null!=l.leftOffset?l.leftOffset:0,d=l&&null!=l.topOffset?l.topOffset:0,m=u,g=p;if(e.isWindow(t))o=Math.min(f.width,t.innerWidth),c=Math.min(f.height,t.innerHeight),a=f.left+t.pageXOffset-t.innerWidth*m+o*m,r=f.top+t.pageYOffset-t.innerHeight*g+c*g,r-=d,i=(a-=h)-t.pageXOffset,s=r-t.pageYOffset;else{o=f.width,c=f.height,n=t.getBoundingClientRect();var v=f.left-(n.left-t.scrollLeft),_=f.top-(n.top-t.scrollTop);a=v+o*m-t.clientWidth*m,r=_+c*g-t.clientHeight*g,a=Math.max(Math.min(a,t.scrollWidth-t.clientWidth),0),r=Math.max(Math.min(r,t.scrollHeight-t.clientHeight),0),r-=d,i=(a-=h)-t.scrollLeft,s=r-t.scrollTop}return{x:a,y:r,differenceX:i,differenceY:s}}(t,e),i=Date.now()-t.startTime,s=Math.min(1/t.time*i,1);if(t.endIterations>=a)return setElementScroll(e,r.x,r.y),e._scrollSettings=null,t.end(n);var o=1-t.ease(s);if(setElementScroll(e,r.x-r.differenceX*o,r.y-r.differenceY*o),i>=t.time)return t.endIterations++,animate(e);!function raf(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(animate.bind(null,e))}}function defaultIsWindow(e){return e.self===e}function transitionScrollTo(e,t,n,r){var i,s=!t._scrollSettings,o=t._scrollSettings,c=Date.now(),l={passive:!0};function end(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),r(e),i&&(t.removeEventListener("touchstart",i,l),t.removeEventListener("wheel",i,l))}o&&o.end(a);var f=n.maxSynchronousAlignments;null==f&&(f=3),t._scrollSettings={startTime:o?o.startTime:Date.now(),endIterations:0,target:e,time:n.time+(o?c-o.startTime:0),ease:n.ease,align:n.align,isWindow:n.isWindow||defaultIsWindow,maxSynchronousAlignments:f,end:end},"cancellable"in n&&!n.cancellable||(i=end.bind(null,a),t.addEventListener("touchstart",i,l),t.addEventListener("wheel",i,l)),s&&animate(t)}function defaultIsScrollable(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function defaultValidTarget(){return!0}e.exports=function(e,t,a){if(e){"function"==typeof t&&(a=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(e){return 1-Math.pow(1-e,e/2)};for(var r=e.parentElement,i=1,s=t.validTarget||defaultValidTarget,o=t.isScrollable;r;){if(s(r,i)&&(o?o(r,defaultIsScrollable):defaultIsScrollable(r))&&(i++,transitionScrollTo(e,r,t,done)),!(r=r.parentElement)){done(n);break}"BODY"===r.tagName&&(r=(r=r.ownerDocument).defaultView||r.ownerWindow)}}function done(e){--i||a&&a(e)}}},WZLu:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("gcR/"),r=n.n(a),i=n("MKeS"),s=Object(i.a)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(83)]).then(n.bind(null,"pzZ4"))}),{LoadingComponent:r()("div",{},void 0,"Loading...")})},qbnB:function(e,t,n){var a=n("juv8"),r=n("LsHQ"),i=n("mTTR"),s=r((function(e,t){a(t,i(t),e)}));e.exports=s},zdiy:function(e,t,n){e.exports=n("qbnB")}}]);