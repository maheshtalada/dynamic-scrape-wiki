(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"0RVi":function(e,t,i){"use strict";i.r(t);var n=i("gcR/"),a=i.n(n),s=i("lwsE"),r=i.n(s),o=i("W8MJ"),l=i.n(o),c=i("a1gu"),h=i.n(c),v=i("Nsbk"),u=i.n(v),d=i("7W2i"),m=i.n(d),f=i("q1tI"),g=i.n(f),p=i("17x9"),E=i.n(p),x=i("5IO/"),S=i("Vg22"),_=i("E+oP"),w=i.n(_),b=i("P/G1"),T=i.n(b),y=i("BkRI"),N=i.n(y),k=i("xweI"),C=i.n(k),O=i("zdiy"),L=i.n(O),I=i("WZLu"),V=i("GMTw"),W=i("9V8J"),P=i("GEYT"),R=i.n(P),M=i("zbfZ"),j=i("jKqO"),F=a()(V.a,{}),q=function(e){function ExpressListing(e){var t;return r()(this,ExpressListing),(t=h()(this,u()(ExpressListing).call(this,e))).state={hasErrors:!1,forceValidation:!1,modifiedValues:{},initialValues:{},isFetching:e.schema_get_overview&&e.schema_get_overview.isFetching||!1,navigatingSaveExit:!1,errorCode:"",isError:!1},t}return m()(ExpressListing,e),l()(ExpressListing,[{key:"componentWillReceiveProps",value:function componentWillReceiveProps(e){var t=e.schema_get_overview;this.setState({isFetching:t&&t.isFetching}),e.schema_save_overview&&e.schema_save_overview.listingid?this.handlePostOnline(e.schema_save_overview):e.schema_save_overview&&e.schema_save_overview.isFetching?this.setState({isFetching:e.schema_save_overview.isFetching}):e.schema_save_overview&&(e.schema_save_overview.error||"error"===e.schema_save_overview.status)&&(window.scrollTo(0,0),this.setState({isError:!0,errorCode:e.schema_save_overview.error&&e.schema_save_overview.error.error_description}))}},{key:"handlePostOnline",value:function handlePostOnline(e){var t=this,i=this.state,n=i.goto,a=i.navigatingSaveExit;n&&"finish"===n?this.setState({isFetching:e.isFetching},(function(){a?t.context.router.push("/profile/listings"):t.context.router.push({pathname:e.listingurl})})):n&&"next"===n&&this.context.router.push({pathname:"/profile/property/property-listing/".concat(e.listingid)})}},{key:"onSchemaChange",value:function onSchemaChange(e,t){var i=this.props;this.setState({changeObject:e,hasErrors:t});var n=T()(i.schemas).length;if(!w()(this.refs))for(var a=0;a<n;++a)this.refs["schema_".concat(a)]&&this.refs["schema_".concat(a)].rebuild()}},{key:"renderSchema",value:function renderSchema(){var e=this,t=this.context,i=t.i18n,n=t.country,s=this.props.schema_get_overview;if(w()(s))return null;var r=s.schemas,o=(s.schemaInfos,s.referenceData);return C()(T()(r),(function(e){return e.order})).map((function(t,s){return a()("div",{id:"schema_".concat(s)},void 0,g.a.createElement(I.a,{l:i.l,country:n,ref:"schema_".concat(s),data:t,writeMode:!0,onChange:e.onSchemaChange.bind(e),modifiedValues:e.state.modifiedValues,initialValues:e.state.initialValues,referenceData:o}))}))}},{key:"onSubmit",value:function onSubmit(e){for(var t=!0,i=T()(this.props.schema_get_overview.schemas).length,n=[],a=0;a<i;++a)this.refs["schema_".concat(a)].checkSubmissionValid()||(n.push("schema_".concat(a)),t=!1);t?(this.setState({goto:e}),this.props.dispatch(Object(j.e)({payload:L()({},this.state.initialValues,this.state.modifiedValues)}))):R()(docoument.getElementById(n[0]))}},{key:"onNextClick",value:function onNextClick(){this.onSubmit("next")}},{key:"onConfirmClick",value:function onConfirmClick(){this.onSubmit("finish")}},{key:"onNavigateSaveExitClick",value:function onNavigateSaveExitClick(){this.onSubmit("finish"),this.setState({navigatingSaveExit:!0})}},{key:"render",value:function render(){var e=this.context.i18n.l,t=this.state,i=t.isFetching,n=t.errorCode,s=t.isError;return a()("div",{className:"schema-forms"},void 0,i&&!frameworkGlobals.isServer&&F,s&&a()(M.a,{l:e,errorCode:n}),this.renderSchema(),!i&&a()(W.a,{nextText:"NEXTTOPROPERTY",isBackRequired:!1,saveExitText:"POSTONLINE",className:"linear-navigation--light-theme",isSaveExitRequired:!0,isNavigatingSaveExitRequired:!0,navigatingSaveExitText:"SAVEEXIT",onNext:this.onNextClick.bind(this),onConfirm:this.onConfirmClick.bind(this),onNavigateSaveExit:this.onNavigateSaveExitClick.bind(this)}))}}]),ExpressListing}(f.Component);q.contextTypes={router:E.a.object,i18n:E.a.object,country:E.a.string};var H=Object(S.connect)((function mapStateToProps(e){return{schema_save_overview:e.schema.schema_save_overview}}))(q),A=i("oasI"),B=i("cTyv"),Y=function(e){function ExpressListingPage(e){var t;r()(this,ExpressListingPage),t=h()(this,u()(ExpressListingPage).call(this,e));var i=N()(B.a);return i[1].activeStep=!0,t.state={navigationMap:i},t}return m()(ExpressListingPage,e),l()(ExpressListingPage,[{key:"render",value:function render(){var e=this.context.i18n.l,t=this.state.navigationMap;return t[1].canNavigate=this.props.isExisting,a()("div",{className:"profile-page__layout__profile-section"},void 0,a()("div",{className:"schema-listing-page listing-overview-page flex-layout"},void 0,a()("div",{className:"row"},void 0,a()("div",{className:"col-xs-12"},void 0,a()(A.a,{steps:t,currentStep:t[1],keyName:"{listingid}",keyValue:this.props.params.id||"",title:"PAGEHEADINGOVERVIEW"}))),a()("div",{className:""},void 0,a()("div",{className:""},void 0,a()("div",{className:""},void 0,a()("div",{className:"schema-border","data-automation-selector":"ssj-section-header-content"},void 0,a()("h2",{className:"subheader-heading","data-automation-selector":"ssj-section-title"},void 0,e("OVERVIEWINFOSCHEMATITLE"))),g.a.createElement(H,this.props))))))}}]),ExpressListingPage}(f.Component);Y.contextTypes={i18n:E.a.object};t.default=Object(S.connect)((function mapStateToProps(e){var t=e.schema.schema_get_overview;return{schema_get_overview:t.schema,isExisting:t.isExisting}}))(Object(x.a)(Y,[j.m],!0))},GEYT:function(e,t){var i="complete",n="canceled";function setElementScroll(e,t,i){e.self===e?e.scrollTo(t,i):(e.scrollLeft=t,e.scrollTop=i)}function animate(e){var t=e._scrollSettings;if(t){var n=t.maxSynchronousAlignments,a=function getTargetScrollLocation(e,t){var i,n,a,s,r,o,l,c=e.align,h=e.target.getBoundingClientRect(),v=c&&null!=c.left?c.left:.5,u=c&&null!=c.top?c.top:.5,d=c&&null!=c.leftOffset?c.leftOffset:0,m=c&&null!=c.topOffset?c.topOffset:0,f=v,g=u;if(e.isWindow(t))o=Math.min(h.width,t.innerWidth),l=Math.min(h.height,t.innerHeight),n=h.left+t.pageXOffset-t.innerWidth*f+o*f,a=h.top+t.pageYOffset-t.innerHeight*g+l*g,a-=m,s=(n-=d)-t.pageXOffset,r=a-t.pageYOffset;else{o=h.width,l=h.height,i=t.getBoundingClientRect();var p=h.left-(i.left-t.scrollLeft),E=h.top-(i.top-t.scrollTop);n=p+o*f-t.clientWidth*f,a=E+l*g-t.clientHeight*g,n=Math.max(Math.min(n,t.scrollWidth-t.clientWidth),0),a=Math.max(Math.min(a,t.scrollHeight-t.clientHeight),0),a-=m,s=(n-=d)-t.scrollLeft,r=a-t.scrollTop}return{x:n,y:a,differenceX:s,differenceY:r}}(t,e),s=Date.now()-t.startTime,r=Math.min(1/t.time*s,1);if(t.endIterations>=n)return setElementScroll(e,a.x,a.y),e._scrollSettings=null,t.end(i);var o=1-t.ease(r);if(setElementScroll(e,a.x-a.differenceX*o,a.y-a.differenceY*o),s>=t.time)return t.endIterations++,animate(e);!function raf(e){if("requestAnimationFrame"in window)return window.requestAnimationFrame(e);setTimeout(e,16)}(animate.bind(null,e))}}function defaultIsWindow(e){return e.self===e}function transitionScrollTo(e,t,i,a){var s,r=!t._scrollSettings,o=t._scrollSettings,l=Date.now(),c={passive:!0};function end(e){t._scrollSettings=null,t.parentElement&&t.parentElement._scrollSettings&&t.parentElement._scrollSettings.end(e),a(e),s&&(t.removeEventListener("touchstart",s,c),t.removeEventListener("wheel",s,c))}o&&o.end(n);var h=i.maxSynchronousAlignments;null==h&&(h=3),t._scrollSettings={startTime:o?o.startTime:Date.now(),endIterations:0,target:e,time:i.time+(o?l-o.startTime:0),ease:i.ease,align:i.align,isWindow:i.isWindow||defaultIsWindow,maxSynchronousAlignments:h,end:end},"cancellable"in i&&!i.cancellable||(s=end.bind(null,n),t.addEventListener("touchstart",s,c),t.addEventListener("wheel",s,c)),r&&animate(t)}function defaultIsScrollable(e){return"pageXOffset"in e||(e.scrollHeight!==e.clientHeight||e.scrollWidth!==e.clientWidth)&&"hidden"!==getComputedStyle(e).overflow}function defaultValidTarget(){return!0}e.exports=function(e,t,n){if(e){"function"==typeof t&&(n=t,t=null),t||(t={}),t.time=isNaN(t.time)?1e3:t.time,t.ease=t.ease||function(e){return 1-Math.pow(1-e,e/2)};for(var a=e.parentElement,s=1,r=t.validTarget||defaultValidTarget,o=t.isScrollable;a;){if(r(a,s)&&(o?o(a,defaultIsScrollable):defaultIsScrollable(a))&&(s++,transitionScrollTo(e,a,t,done)),!(a=a.parentElement)){done(i);break}"BODY"===a.tagName&&(a=(a=a.ownerDocument).defaultView||a.ownerWindow)}}function done(e){--s||n&&n(e)}}},WZLu:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("gcR/"),a=i.n(n),s=i("MKeS"),r=Object(s.a)((function(){return Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(83)]).then(i.bind(null,"pzZ4"))}),{LoadingComponent:a()("div",{},void 0,"Loading...")})},qbnB:function(e,t,i){var n=i("juv8"),a=i("LsHQ"),s=i("mTTR"),r=a((function(e,t){n(t,s(t),e)}));e.exports=r},zbfZ:function(e,t,i){"use strict";var n=i("gcR/"),a=i.n(n),s=(i("q1tI"),i("TSYQ")),r=i.n(s);t.a=function ErrorBox(e){var t=e.errorCode,i=e.l,n=e.classNames,s=e.children,o=void 0===s?null:s;return a()("div",{className:r()("error-box",n)},void 0,i(t),o)}},zdiy:function(e,t,i){e.exports=i("qbnB")}}]);